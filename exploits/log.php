<?php

date_default_timezone_set('UTC');

header("Access-Control-Allow-Origin: *");

if (isset($_GET["s"]))
    switch ($_GET["s"]) {
        case "deviant":
            header("Location: /images/fur/1331119329.falvie_now_we_know2.png");
            break;
    }

$logfile = "/srv/vhosts/darkfox.us.to/logs/".basename(isset($_GET["s"]) ? $_GET["s"]
    : (isset($_POST["s"]) ? $_POST["s"] : "unknown"));

echo $logfile;

file_put_contents($logfile,
    date("Y-m-d H:i:s")
      . " - ${_SERVER['REMOTE_ADDR']} - "
      . json_encode($_GET)
      . ' - '
      . json_encode($_POST)
      . " - ${_SERVER['HTTP_USER_AGENT']}\n",
    FILE_APPEND);

?>
